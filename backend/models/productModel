const mongoose = require('mongoose');
const Schema = mongoose.Schema

const productSchema = new Schema({
    name : { type : String, required : true },
    description : { type : String, required : true },
    price : { type : Number, required : true },
    newPrice : { type : Number, default : () => { return this.price; } },
    minPrice : { type : Number, default : () => { return this.price; } },
    maxPrice : { type : Number, default : () => { return this.price; } },
    condition : { type : String, enum : ['new', 'used'], default : 'new' },
    seller : { type : Schema.Types.ObjectId, ref : 'User', required : true },
    category : { type : Schema.Types.ObjectId, ref : 'Category', required : true  },
    //category : { type : String, required : false },
    marque : { type : String, required : false },
    couleur : [{ type : String, required : false}],
    images : [{ type : String, required : true}],
    feesBy : { type : String, enum : ['seller', 'buyer'], default : "buyer" },
    stock : { type : Number },
    likes : { type : Number, default : 0 },
    inBasket : { type : Number, default : 0 },

    createdAt : { type : Date, default : Date.now },
    updatedAt : { type : Date, default : Date.now }
});

module.exports = mongoose.model('Product', productSchema);