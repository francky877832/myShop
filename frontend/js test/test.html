<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload multiple images</title>
</head>
<body>
  <form action="http://localhost:3000/api/datas/products/add" method="post" enctype="multipart/form-data" id="form">
    <input type="text" name="name" placeholder="Product Name">
    <input type="text" name="description" placeholder="Product Description">
    <input type="file" name="images" multiple>
    <button type="submit">Upload</button>
  </form>
  <script> 
  document.addEventListener('DOMContentLoaded', function () {
    const formulaire = document.getElementById('form');

    formulaire.addEventListener('submit', function (event) {
        event.preventDefault(); // Empêche la soumission par défaut

        // Récupération des données du formulaire
        const formData = new FormData(formulaire);
		
		const datas = {
    buyer : "66715deae5f65636347e7f9e",
    seller : "66715f91d3b51ee92c1dc017",
    user : "66715f91d3b51ee92c1dc017",
    from : "66715f91d3b51ee92c1dc017",
    product : "666ec2ac5b75b61beb73ba05",
    products : ["666ec2ac5b75b61beb73ba05"],
    id : "66717dd98d767b1b331d3abb",
	price : 55,
	newPrice : 55,
	minPrice : 55,
	maxPrice : 55,
	condition : "new",
    realPrice : 66,
    offerPrice : 55,
    totalPrice : 55,
    quantity : 5,
    status : "shipped",
    shippingAddress : {"street":"Rue de la joie", "city":"Douala", "country":"Cameroun"},
    response : 2,
    updateLikes : 1,
   email : "francy@gmail.com",
    password : "oooooooo",
    username : "Frack",
    text : "Jaime ce produit. Comment faire ?",
	name : "telephone",
	description : "Telephone neuf",
	category : "id cat",
	brand : "brand id",
	couleur : "red",
	feesBy : "seller",
	garanti : 0,
	stock : 1,
	visibility : 1
}

        // Modification des données avant envoi
        //formData.append('product', JSON.stringify(datas));
		console.log(datas)
  

        // Création et envoi de la requête XMLHttpRequest avec les données modifiées
        const xhr = new XMLHttpRequest();
        xhr.open('POST', formulaire.action);
		xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.onload = function () {
            if (xhr.status === 200) {
                console.log('Formulaire envoyé avec succès');
            } else {
                console.error('Erreur lors de l\'envoi du formulaire');
            }
        };
        xhr.send(JSON.stringify({"product" : datas}));
    });
});
 </script>
</body>
</html>
